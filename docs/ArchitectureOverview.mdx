import FlowImage from '../src/components/flow-image';

# معماری کلی برنامه در ایتا

معماری برنامه در پیام‌رسان ایتا به گونه‌ای طراحی شده که توسعه‌دهندگان بتوانند اپلیکیشن‌های تحت وب خود را به‌سادگی در بستر پیام‌رسان اجرا کرده و با کاربر تعامل داشته باشند. در این بخش با اجزای اصلی این معماری و نحوه ارتباط آن‌ها آشنا می‌شویم.

## اجزای اصلی معماری

### 1. کلاینت پیام‌رسان ایتا
- محیطی است که کاربر در آن برنامه را اجرا می‌کند.
- این محیط می‌تواند اپلیکیشن موبایل (Android یا iOS)، نسخه دسکتاپ یا وب پیام‌رسان (این نسخه هنوز نهایی نشده) باشد.
- اجرای برنامه از طریق WebView داخلی انجام می‌شود.

### 2. وب‌اپلیکیشن توسعه‌دهنده
- اپلیکیشنی مبتنی بر HTML/CSS/JS است که توسط شما توسعه یافته و روی سرور شما یا یک هاست بارگذاری شده است.
- وب اپلیکشن الزاما باید دارای آدرس ایمن (https) باشد.
- واسط جاوااسکریپت ([کیت توسعه  SDK](Develop/JsSDK)) در این محیط فعال است تا برنامه بتواند با پیام‌رسان ارتباط برقرار کند و اطلاعات اولیه مانند اطلاعات کاربر و تم برنامه ایتا را دریافت کند.

### 3. سرور توسعه‌دهنده (اختیاری)
- اگر وب اپلیکیشن شما نیاز به دریافت داده‌های دینامیک از پایگاه‌داده یا انجام عملیات سمت سرور داشته باشد، یک Backend مستقل لازم خواهد بود.
- این سرور می‌تواند داده‌ها را پردازش کرده و به برنامه پاسخ دهد.


[//]: # (### 4. سرور پیام‌رسان ایتا)

[//]: # (- مسئول صدور توکن دسترسی کاربر به برنامه است.)

[//]: # (- اطلاعات مربوط به هر برنامه &#40;مانند URL، مجوزها، آیکون و...&#41; در این بخش ثبت و مدیریت می‌شود.)

[//]: # (- احراز هویت کاربر، ثبت رویدادها و گزارش‌گیری از فعالیت برنامه نیز از این قسمت انجام می‌شود.)

---

## جریان کلی اجرا (Execution Flow)

1. **ورود کاربر به برنامه:**
   - کاربر روی دکمه یا لینک مربوط به برنامه در گفتگو یا کانال کلیک می‌کند.
   - WebView درون‌برنامه‌ای باز شده و URL برنامه شما باز می‌شود.

2. **ارسال پارامترها به برنامه:**
   - پیام‌رسان هنگام باز کردن، اطلاعات لازم (مثلاً شناسه کاربر، نام کاربر و...) را به صورت هش پارامتر و از طریق [کیت توسعه ( SDK )](Develop/JsSDK) ارائه می‌کند.

3. **تعامل برنامه با کاربر و پیام‌رسان:**
   - برنامه می‌تواند با استفاده از [کیت توسعه ( SDK )](Develop/JsSDK) از امکانات رابط کاربری ایتا استفاده کند.

4. **ارسال داده به سرور توسعه‌دهنده (در صورت نیاز):**
   - وب اپلیکیشن می‌تواند درخواست‌هایی به سرور Backend شما ارسال کند (مثل ذخیره اطلاعات، اعتبارسنجی، بازیابی سفارش و ...).

5. **پایان کار و بستن برنامه:**
   - کاربر می‌تواند برنامه را ببندد یا به‌طور خودکار بسته شود (مثلاً پس از ثبت موفق فرم).

---

## نمودار ارتباطی اجزا (توصیفی)

<FlowImage />
<br/>

>  توجه: برای حفظ امنیت، ارتباط برنامه با سرور شما باید حتماً از طریق HTTPS انجام شود.

---

## جمع‌بندی

معماری برنامه به‌گونه‌ای طراحی شده که توسعه‌دهندگان بتوانند با استفاده از فناوری‌های رایج وب مانند HTML، CSS، JavaScript، React، Vue و ... اپلیکیشن‌های تعاملی خود را به‌سرعت توسعه داده و به کاربران ایتا ارائه دهند. به‌کارگیری صحیح این معماری نه‌تنها تجربه کاربری روانی فراهم می‌کند، بلکه امنیت، انعطاف‌پذیری و مقیاس‌پذیری بالایی نیز به همراه دارد.